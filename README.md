# mkplot

Построение графиков с помощью MatPlotLib

## Возможности

- Построение по точкам с указанием погрешностей в виде крестов, который можно допонить:
  - графиком МНК
  - графиком МНК на логарифмической шкале
  - графиком полиномиальной регрессии
- Запись рассчитанных коэффициентов для МНК и полиномиальной регрессии всех графиков в файл
- Построение нескольких графиков на одной координатной плоскости
- Построение нескольких координатных плоскостей
- Добавление названий графиков, осей, легенды

## Как пользоваться

### 1. Файл с данными

Рядом с `main.py` создаёте файл `conf.json` и добавляете в него информацию о графике, который вы хотите построить. Рассмотрим пример файла `conf.json`:

    {
        "data" : [
            {
                "title" : "Plot 1",
                "subplots" : [
                    {
                        "type" : "poly_5",
                        "x" : [0.09, 0.17, 0.26, 0.32, 0.39],
                        "y" : [0.05, 0.09, 0.17, 0.17, 0.21],
                        "xerr_mode": "absolute",
                        "xerr" : [0.01, 0.02, 0.02, 0.01, 0.02],
                        "yerr_mode": "absolute",
                        "yerr" : [0.03, 0.01, 0.01, 0.04, 0.01],
                        "axes_labels" : ["dx", "F"],
                        "axes_pupils" : ["м", "Н"],
                        "color" : "red",
                        "shape" : "o",
                        "description" : "пример полинома степени 5"
                    },
                    {
                        "type" : "lsq",
                        "x" : [0.09, 0.17, 0.26, 0.32, 0.39],
                        "y" : [0.18, 0.34, 0.52, 0.64, 0.78],
                        "xerr_mode": "absolute",
                        "xerr" : [0.01, 0.02, 0.02, 0.01, 0.02],
                        "yerr_mode": "absolute",
                        "yerr" : [0.03, 0.01, 0.01, 0.04, 0.01],
                        "axes_labels" : ["dx", "F"],
                        "axes_pupils" : ["м", "Н"],
                        "color" : "blue",
                        "shape" : "s",
                        "description" : "характеристика пружины с МНК"
                    }
                ]
            }
        ]
    }

По структуре это вложенный словарь. Ключу "data" соответствует массив объектов. Каждый из элементов этого массива является координатной плоскостью.

У каждого элемента есть поля "title" -- название и "subplots" -- массив из графиков, которые должны быть построены на этой координатной плоскости.

В данном примере будет одна координатная плоскость, на которой будут построены два графика, один с МНК, другой с полиномиальной регрессией степени 5.

_Примечание_: Пока есть некоторые траблы с построением нескольких координатых плоскостей -- графики очень сильно сжимаются, поэтому лучше строить только одну координатную плоскость за раз.

### 2. Подробнее о графиках

У каждого графика есть поля:

- "type" : какой график строить по данным. В данный момент поддерживаются:
  - "dots" -- просто точки
  - "lsq" -- МНК
  - "log" -- логарифмическая шкала с МНК.
  - "poly_n" -- полиномиальная регрессия степени n
- "x" : массив из x-координат точек
- "y" : массив из y-координат точек
- "xerr_mode" : режим погрешности по оси Ox
- "xerr" : погрешности x-координат точек
- "yerr_mode" : режим погрешности по оси Oy
- "yerr" : погрешности y-координат точек
- "axes_labels" : массив из названий осей в порядке Ox, Oy
- "axes_pupils" : массив из единиц измерения для осей в порядке Ox, Oy
- "color" : цвет построенной кривой
- "shape" : форма точек. Самые ходовые варианты:
  - "o" -- круг
  - "s" -- квадрат
  - "v", "^" -- треугольники
  - "D" -- ромб
- "description" : описание графика в легенде

### 3. Подробнее о погрешностях

Для упрощения жизни поддерживаются три режима ("xerr_mode", "yerr_mode") задания погрешностей точек ("xerr", "yerr"):

- "absolute" -- стандартный режим, _абсолютная_ погрешность указывается для каждой точки отдельно. Пример: `"xerr_mode": "absolute", "xerr" : [0.01, 0.02, 0.02, 0.01, 0.02]`
- "constant" -- на случай, если везде одна и та же _абсолютная_ погрешность. Пример: `"xerr_mode": "absolute", "xerr" : 0.3`
- "relative" -- на случай, если везде одна и та же _относительная_ погрешность. Пример погрешности 5%: `"xerr_mode": "relative", "xerr" : 0.05`

### 4. Запуск

Когда вы запишете информацию в `conf.json`, необходимо запустить `main.py`.

_Примечание_: при первом запуске может быть автоматически произведена установка python-библиотек NumPy и MatPlotLib, если таковые не установлены. Суммарный вес не превышает нескольких десятков мегабайт.

Помимо интерактивного графического окна, результат будет сохранен в файле `/images/fig.png`.
